# node-red-contrib-plate-recognizer
A Node-RED node for license plate recognizing via platerecognizer.com

## Install
Run the following npm command in your Node-RED user directory (typically ~/.node-red):
```
npm install node-red-contrib-plate-recognizer
```

## Node usage

![Example flow](https://user-images.githubusercontent.com/14224149/74985812-88e78f00-5438-11ea-8f5c-790730d77047.png)

```
[{"id":"365dfd56.bee042","type":"plate-recognizer","z":"d9a54719.b13a88","name":"","inputField":"payload","inputFieldType":"msg","outputField":"payload","outputFieldType":"msg","url":"https://api.platerecognizer.com/v1/plate-reader/","x":500,"y":260,"wires":[["30e76c51.f92384"]]},{"id":"c4392f6a.a0f7","type":"inject","z":"d9a54719.b13a88","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":260,"wires":[["8cf42bca.268018"]]},{"id":"30e76c51.f92384","type":"debug","z":"d9a54719.b13a88","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":680,"y":260,"wires":[]},{"id":"8cf42bca.268018","type":"http request","z":"d9a54719.b13a88","name":"","method":"GET","ret":"bin","paytoqs":false,"url":"https://www.mercedes-benz.com/en/classic/history/h-number-plate-2020/_jcr_content/root/paragraph/paragraph-right/paragraphimage/image/MQ6-8-image-20191205151927/02-mercedes-benz-classic-h-number-plate-2020-2560x1440.jpeg","tls":"","persist":false,"proxy":"","authType":"","x":300,"y":260,"wires":[["365dfd56.bee042"]]}]
```

The result will be a recognition in json format:

![Json output](https://user-images.githubusercontent.com/14224149/74986050-1b882e00-5439-11ea-9da7-d1f21147718b.png)

## Example flow

The following flow explains some different use cases.  Note that the [node-red-contrib-image-output](https://github.com/rikukissa/node-red-contrib-image-output) node needs to be installed also!

![image](https://user-images.githubusercontent.com/14224149/75100715-d4817080-55d1-11ea-9c64-2dae43df8fe8.png)

```
[{"id":"c4392f6a.a0f7","type":"inject","z":"d9a54719.b13a88","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":80,"wires":[["8cf42bca.268018"]]},{"id":"30e76c51.f92384","type":"debug","z":"d9a54719.b13a88","name":"Normal recognitions","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"recognition","targetType":"msg","x":820,"y":200,"wires":[]},{"id":"8cf42bca.268018","type":"http request","z":"d9a54719.b13a88","name":"","method":"GET","ret":"bin","paytoqs":false,"url":"https://www.mercedes-benz.com/en/classic/history/h-number-plate-2020/_jcr_content/root/paragraph/paragraph-right/paragraphimage/image/MQ6-8-image-20191205151927/02-mercedes-benz-classic-h-number-plate-2020-2560x1440.jpeg","tls":"","persist":false,"proxy":"","authType":"","x":360,"y":80,"wires":[["1b28085a.576958"]]},{"id":"7ffbc2e9.59702c","type":"inject","z":"d9a54719.b13a88","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":280,"wires":[["e0d62002.fe834"]]},{"id":"e0d62002.fe834","type":"http request","z":"d9a54719.b13a88","name":"","method":"GET","ret":"bin","paytoqs":false,"url":"https://image.freepik.com/free-photo/empty-parking-lot_1127-3298.jpg","tls":"","persist":false,"proxy":"","authType":"","x":360,"y":280,"wires":[["1b28085a.576958"]]},{"id":"7712131.b1a7bec","type":"comment","z":"d9a54719.b13a88","name":"No cars","info":"","x":150,"y":240,"wires":[]},{"id":"1b28085a.576958","type":"plate-recognizer","z":"d9a54719.b13a88","name":"","inputField":"payload","inputFieldType":"msg","outputField":"recognition","outputFieldType":"msg","url":"https://api.platerecognizer.com/v1/plate-reader/","ignoreDuring":false,"makeAndModel":false,"statusText":"scores","regionFilter":false,"regionList":"","regionListType":"json","x":580,"y":280,"wires":[["30e76c51.f92384","567d08ad.45bfd8"],["95b6f80.d7a9108"]]},{"id":"567d08ad.45bfd8","type":"image","z":"d9a54719.b13a88","name":"Show analyzed image","width":"400","data":"payload","dataType":"msg","thumbnail":false,"active":true,"x":1000,"y":260,"wires":[]},{"id":"548fbfb1.e1d41","type":"inject","z":"d9a54719.b13a88","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":580,"wires":[["c57cca1d.82a5a8"]]},{"id":"c57cca1d.82a5a8","type":"http request","z":"d9a54719.b13a88","name":"","method":"GET","ret":"bin","paytoqs":false,"url":"https://static.nieuwsblad.be/Assets/Images_Upload/2015/05/24/patton_drivers_2015_1.jpg?maxheight=460&maxwidth=638&scale=both","tls":"","persist":false,"proxy":"","authType":"","x":360,"y":580,"wires":[["1b28085a.576958"]]},{"id":"7e145de0.50ad14","type":"inject","z":"d9a54719.b13a88","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":380,"wires":[["bdf46a0d.7b4c58"]]},{"id":"bdf46a0d.7b4c58","type":"http request","z":"d9a54719.b13a88","name":"","method":"GET","ret":"bin","paytoqs":false,"url":"http://newscrane.com/wp-content/uploads/2019/09/Car-insurance-Newscrane-02.jpg","tls":"","persist":false,"proxy":"","authType":"","x":360,"y":380,"wires":[["1b28085a.576958"]]},{"id":"be47d8fb.90d608","type":"inject","z":"d9a54719.b13a88","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":180,"wires":[["4285a683.29a558"]]},{"id":"4285a683.29a558","type":"http request","z":"d9a54719.b13a88","name":"","method":"GET","ret":"bin","paytoqs":false,"url":"http://www.piepenbroek.nl/foto2010/baltisch/IMG_1499.JPG","tls":"","persist":false,"proxy":"","authType":"","x":360,"y":180,"wires":[["1b28085a.576958"]]},{"id":"22132326.f0947c","type":"comment","z":"d9a54719.b13a88","name":"Two cars","info":"","x":160,"y":140,"wires":[]},{"id":"1677bb6f.cfd445","type":"comment","z":"d9a54719.b13a88","name":"One car","info":"","x":150,"y":40,"wires":[]},{"id":"95b6f80.d7a9108","type":"debug","z":"d9a54719.b13a88","name":"Errors","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"recognition","targetType":"msg","x":770,"y":300,"wires":[]},{"id":"bcd5e60.4f93418","type":"comment","z":"d9a54719.b13a88","name":"Truck with labels","info":"","x":180,"y":540,"wires":[]},{"id":"f83c73ff.60e76","type":"comment","z":"d9a54719.b13a88","name":"Car at angle","info":"","x":170,"y":340,"wires":[]},{"id":"3e15dcf3.44e774","type":"inject","z":"d9a54719.b13a88","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":480,"wires":[["27a318c5.4de638"]]},{"id":"27a318c5.4de638","type":"http request","z":"d9a54719.b13a88","name":"","method":"GET","ret":"bin","paytoqs":false,"url":"https://askautoexperts.com/wp-content/uploads/1931-Dodge-1024x768.jpg","tls":"","persist":false,"proxy":"","authType":"","x":360,"y":480,"wires":[["1b28085a.576958"]]},{"id":"682a68e3.d11598","type":"comment","z":"d9a54719.b13a88","name":"Another car at angle","info":"","x":190,"y":440,"wires":[]}]
```
